import { db } from '../db';
import * as schema from '@shared/schema';

async function clearAnimals() {
  try {
    console.log('üóëÔ∏è –û—á–∏—Å—Ç–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ –∂–∏–≤–æ—Ç–Ω—ã—Ö...');
    
    // –£–¥–∞–ª—è–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∂–∏–≤–æ—Ç–Ω—ã—Ö
    console.log('üì∏ –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π...');
    await db.delete(schema.animalPhotos);
    
    // –£–¥–∞–ª—è–µ–º –≤–∏–¥–µ–æ –∂–∏–≤–æ—Ç–Ω—ã—Ö
    console.log('üé• –£–¥–∞–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ...');
    await db.delete(schema.animalVideos);
    
    // –£–¥–∞–ª—è–µ–º –¥–æ–∫—É–º–µ–Ω—Ç—ã –∂–∏–≤–æ—Ç–Ω—ã—Ö
    console.log('üìÑ –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤...');
    await db.delete(schema.animalDocuments);
    
    // –£–¥–∞–ª—è–µ–º –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
    console.log('‚≠ê –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ...');
    await db.delete(schema.favorites);
    
    // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏
    console.log('üí¨ –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π...');
    // –ó–¥–µ—Å—å –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏
    
    // –£–¥–∞–ª—è–µ–º —Å–∞–º–∏—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö
    console.log('üêÑ –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∂–∏–≤–æ—Ç–Ω—ã—Ö...');
    const result = await db.delete(schema.animals);
    
    console.log('‚úÖ –ö–∞—Ç–∞–ª–æ–≥ –∂–∏–≤–æ—Ç–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ –æ—á–∏—â–µ–Ω!');
    console.log(`üìä –£–¥–∞–ª–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π: ${result.rowsAffected || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}`);
    
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –∫–∞—Ç–∞–ª–æ–≥–∞:', error);
    throw error;
  }
}

// –ó–∞–ø—É—Å–∫
clearAnimals(); 